<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Plotting with Seaborn - Part 2</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="">
    <link rel="canonical" href="/ml/2021/09/07/Seaborn-Part2/">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-96x96.png">

    <!--flattr.com -->
    <meta name="flattr:id" content="nlxxeo">

    <!-- Stuff added for BibTex dropdown menu -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

        <!--KaTeX-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>
        <script>
         document.addEventListener("DOMContentLoaded", function() {
             renderMathInElement(document.body, {
                 // ...options...
             });
         });
        </script>
        
</head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MJT6KHN3F1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MJT6KHN3F1');
</script>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">

    <body>
    <a name="top"></a>
    <header class="site-header">
  <div class="wrap">

    <div style="float:left; margin-top:10px; margin-right:10px;">
      <a href="/about/">
    <img src="/sk.png" width="45">
  </a>
  </div>

    <a class="site-title site-link" href="/about/">Skander Kacem</a> <br>
    <p class="site-subtitle" style="font-style: italic; text-align: center;">Thinking out loud</p>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        <a class="site-link" href="/thoughts/">Thoughts</a>
        <a class="site-link" href="/readings/">Readings</a>
        <a class="site-link" href="/notes/">Notes</a>
      </div>
    </nav>
  </div>
</header>

    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Plotting with Seaborn - Part 2</h1>
    <div class="post-meta">
      <div class="post-date">
        <i class="fa fa-calendar-o"></i>
        2021-09-07
      </div>
      <div class="post-tags">
        <i class="fa fa-tags"></i>
        
          <span><a href="/tag/Visualization"><code class="highligher"><nobr>Visualization</nobr></code></a></span>
        
          <span><a href="/tag/Tutorial"><code class="highligher"><nobr>Tutorial</nobr></code></a></span>
        
          <span><a href="/tag/Seaborn"><code class="highligher"><nobr>Seaborn</nobr></code></a></span>
        
          <span><a href="/tag/Python"><code class="highligher"><nobr>Python</nobr></code></a></span>
        
      </div>
    </div>
  </header>

  <article class="post-content">
  <p>In this part of the tutorial, we will look at more advanced visualization techniques for exploring multivariate and complex datasets, including conditional small multiples and pairwise data relationships. Namely, 
when exploring multidimensional data, it is useful to draw multiple instances of the same representation for different subsets of your data. This type of representation is also known as faceting and is related to the idea of small multiples.</p>

<h2 id="faceting">Faceting</h2>

<p>One powerful technique in data visualization, particularly when exploring multidimensional datasets, is to create multiple versions of the same plot with several subsets of that data alongside each other, sharing the same scale and axis.  This allows a lot of information to be presented compactly and in a comparable way.</p>

<div class="imgcap">
<img src="/assets/4/Horse_in_Motion.jpg" style="zoom:50%;" alt="The horse in motion by Eadweard Muybridge as one of the first small multiple technique" />
<div class="thecap"> The Horse in Motion by Eadweard Muybridge</div></div>

<p>It is related to the idea of <a href="https://en.wikipedia.org/wiki/Small_multiple">“small multiples”</a> (also known as trellis or lattice) first introduced by Eadweard Muybridge, around 1880, and popularized by Edward Tufte [1].</p>

<blockquote>
  <p>At the heart of quantitative reasoning is a single question: <em>Compared to what?</em> Small multiple designs, multivariate and data bountiful, answer directly by visually enforcing comparisons of changes, of the differences among objects, of the scope of alternatives. For a wide range of problems in data presentation, small multiples are the best design solution. – Edward Tufte, 1990</p>
</blockquote>

<p>While this may sound intuitive, it is very tedious to produce unless you use the right visualization library. <br />
One of the most powerful aspects of the seaborn  is how easy it is to create these types of plots. With a single command, you can split a given plot into many related plots using: <code class="language-plaintext highlighter-rouge">FacetGrid()</code>, <code class="language-plaintext highlighter-rouge">JointGrid()</code> or <code class="language-plaintext highlighter-rouge">PairGrid()</code>.</p>

<p>In the following we’ll put these seaborn’s classes in action, and see why they are so useful.</p>

<h2 id="faceting-with-seaborn">Faceting with Seaborn</h2>

<h3 id="facetgrid">FacetGrid</h3>

<p>The most basic utility provided by seaborn for faceting is the <code class="language-plaintext highlighter-rouge">FacetGrid</code>. It is an object that specifies how to split the layout of the data to be visualized. It partitions a figure into a matrix of axes defined by row and column faceting variables. It is most useful when you have two discrete variables, and all combinations of the variables exist in the data..  A third dimension can be added by specifying a hue parameter.</p>

<p>For example, suppose that we’re interested in comparing male and female penguins of each specie in some way. To do this, we start by importing the required modules, setting the notebook environment and loading the penguins dataset as pandas DataFrame:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries
</span><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">seaborn</span> <span class="k">as</span> <span class="n">sns</span>

<span class="c1"># Set the notebook environment
</span><span class="o">%</span><span class="n">precision</span> <span class="o">%</span><span class="p">.</span><span class="mi">3</span><span class="n">f</span>
<span class="n">pd</span><span class="p">.</span><span class="n">options</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="sh">'</span><span class="s">{:,.3f}</span><span class="sh">'</span><span class="p">.</span><span class="nb">format</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="sh">"</span><span class="s">figure.figsize</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span><span class="mi">5</span>
<span class="n">pd</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="sh">'</span><span class="s">display.width</span><span class="sh">'</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="sh">'</span><span class="s">font.size</span><span class="sh">'</span><span class="p">:</span> <span class="mi">22</span><span class="p">})</span>
<span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="sh">'</span><span class="s">fivethirtyeight</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Load the penguins dataset
</span><span class="n">penguins</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">load_dataset</span><span class="p">(</span><span class="sh">'</span><span class="s">penguins</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>Then we create an instance of the <code class="language-plaintext highlighter-rouge">FacetGrid</code> class with our data, telling it that we want to break the <code class="language-plaintext highlighter-rouge">sex</code> and <code class="language-plaintext highlighter-rouge">species</code> variables, by <code class="language-plaintext highlighter-rouge">row</code> and <code class="language-plaintext highlighter-rouge">col</code>. Since we have 3 species, we obtain a 2x3-grid of facets ready for us to plot something on them.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">FacetGrid</span><span class="p">(</span><span class="n">penguins</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="sh">'</span><span class="s">sex</span><span class="sh">'</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="sh">'</span><span class="s">species</span><span class="sh">'</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.75</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">set_titles</span><span class="p">(</span><span class="n">row_template</span><span class="o">=</span><span class="sh">'</span><span class="s">{row_name}</span><span class="sh">'</span><span class="p">,</span> <span class="n">col_template</span><span class="o">=</span><span class="sh">'</span><span class="s">{col_name} Penguins</span><span class="sh">'</span><span class="p">);</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/facetGrid1.png" style="zoom:90%;" alt="3x2 matrix of grids generated with FacetGrid" />
<div class="thecap"> </div></div>

<p>Each facet is labeled at the top. The overall layout minimizes the duplication of axis labels and other scales.</p>

<p>We then use the <code class="language-plaintext highlighter-rouge">FacetGrid.map()</code> method to plot the data on the instantiated grid object.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="sh">'</span><span class="s">bmh</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Create a figure with 6 facet grids
</span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">FacetGrid</span><span class="p">(</span><span class="n">penguins</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="sh">'</span><span class="s">sex</span><span class="sh">'</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="sh">'</span><span class="s">species</span><span class="sh">'</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.75</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">set_titles</span><span class="p">(</span><span class="n">row_template</span><span class="o">=</span><span class="sh">'</span><span class="s">{row_name}</span><span class="sh">'</span><span class="p">,</span> <span class="n">col_template</span><span class="o">=</span><span class="sh">'</span><span class="s">{col_name} Penguins</span><span class="sh">'</span><span class="p">);</span>

<span class="c1"># plot a histogram  in each facet
</span><span class="n">g</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">,</span> <span class="sh">'</span><span class="s">body_mass_g</span><span class="sh">'</span><span class="p">,</span> <span class="n">binwidth</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># set x, y labels
</span><span class="n">g</span><span class="p">.</span><span class="nf">set_axis_labels</span><span class="p">(</span><span class="sh">'</span><span class="s">Body Mass (g)</span><span class="sh">'</span><span class="p">,</span> <span class="sh">"</span><span class="s">Count</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/facetGrid2.png" style="zoom:120%;" alt="3x2 scatter matrix  generated with FacetGrid using penguins dataset" />
<div class="thecap"> </div></div>

<p>Now, the function we pass to the <code class="language-plaintext highlighter-rouge">map</code> method doesn’t have to be a seaborn or matplotlib plotting function. It can handle any type of function as long as it meets the following requirements:</p>

<ol>
  <li>It must plot on the “currently active” matplotlib <code class="language-plaintext highlighter-rouge">axes</code>. This applies to functions in the <code class="language-plaintext highlighter-rouge">matplotlib.pyplot</code> namespace. In fact you can call <code class="language-plaintext highlighter-rouge">matplotlib.pyplot.gca()</code> to get a reference to the current <code class="language-plaintext highlighter-rouge">axes</code> if you intend to use their methods.</li>
  <li>It must accept the data that it plots as arguments.</li>
  <li>It must have a generic dictionary of <code class="language-plaintext highlighter-rouge">**kwargs</code> and pass it along to the underlying plotting function.</li>
</ol>

<p>So let’s define our own custom function according to the above requirements. The function is supposed to compute the average of a given variable and add it as a dashed line to the currently active <code class="language-plaintext highlighter-rouge">axes</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="c1"># 1. requirement
</span>    <span class="c1"># Calculate mean for each group
</span>    <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">mean</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">var</span><span class="p">])</span>
    
    <span class="c1"># 2. requirement
</span>    <span class="c1"># Get current axis
</span>    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">gca</span><span class="p">()</span>
    
    <span class="c1"># 3. requirement
</span>    <span class="c1"># Add line at group mean
</span>    <span class="n">ax</span><span class="p">.</span><span class="nf">axvline</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">maroon</span><span class="sh">'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="sh">'</span><span class="s">--</span><span class="sh">'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="c1"># Annotate group mean
</span>    <span class="n">x_pos</span><span class="o">=</span><span class="mf">0.6</span>
    <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">5000</span><span class="p">:</span> <span class="n">x_pos</span><span class="o">=</span><span class="mf">0.2</span>
    <span class="n">ax</span><span class="p">.</span><span class="nf">text</span><span class="p">(</span><span class="n">x_pos</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="sa">f</span><span class="sh">'</span><span class="s">mean=</span><span class="si">{</span><span class="n">m</span><span class="si">:</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="si">}</span><span class="sh">'</span><span class="p">,</span> 
            <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="p">.</span><span class="n">transAxes</span><span class="p">,</span>  
            <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">maroon</span><span class="sh">'</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="sh">'</span><span class="s">bold</span><span class="sh">'</span><span class="p">,</span> 
            <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

</code></pre></div></div>

<p>Let’s go ahead and plot the same figure as above, but without the histograms and on top of that we will be adding our own custom function.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">FacetGrid</span><span class="p">(</span><span class="n">penguins</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="sh">'</span><span class="s">sex</span><span class="sh">'</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="sh">'</span><span class="s">species</span><span class="sh">'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">'</span><span class="s">species</span><span class="sh">'</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">g</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">kdeplot</span><span class="p">,</span> <span class="sh">'</span><span class="s">body_mass_g</span><span class="sh">'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">shade</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">map_dataframe</span><span class="p">(</span><span class="n">add_mean</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="sh">'</span><span class="s">body_mass_g</span><span class="sh">'</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">set_axis_labels</span><span class="p">(</span><span class="sh">'</span><span class="s">Body Mass (g)</span><span class="sh">'</span><span class="p">,</span> <span class="sh">"</span><span class="s">Count</span><span class="sh">"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">add_legend</span><span class="p">()</span>
</code></pre></div></div>

<p>As you might notice, instead of using the <code class="language-plaintext highlighter-rouge">map()</code> method to call our custom function, we used the <code class="language-plaintext highlighter-rouge">map_dataframe()</code> method.</p>

<div class="imgcap">
<img src="/assets/4/facetGrid3_1.png" style="zoom:90%;" alt="kde as small multiple with mean annotation generated with FacetGrid " />
<div class="thecap"> </div></div>

<p>As you can see, <code class="language-plaintext highlighter-rouge">FacetGrid</code> is simple yet powerful.  In just a few lines and without thinking about the layout and the appearance, you can elegantly convey a great deal of information. In my opinion, this is a vastly under-used technique in visualization and should actually be part of every exploratory data analysis, whether your goal is a report or a model.</p>

<p><code class="language-plaintext highlighter-rouge">FacetGrid</code> serves as a backbone for the following figure-level functions: <code class="language-plaintext highlighter-rouge">relplot()</code>, <code class="language-plaintext highlighter-rouge">catplot()</code>, <code class="language-plaintext highlighter-rouge">lmplot()</code> and <code class="language-plaintext highlighter-rouge">displot()</code>. In fact, it is strongly recommended to use one of these functions instead of using <code class="language-plaintext highlighter-rouge">FacetGrid</code> directly, particularly if you are using seaborn functions that infer semantic mappings from the dataset within your facets.</p>

<h3 id="pairgrid">PairGrid</h3>

<p><code class="language-plaintext highlighter-rouge">PairGrid</code> is another class provided by seaborn for faceting. It shows pairwise relationships between data elements. Unlike <code class="language-plaintext highlighter-rouge">FacetGrid</code>, it uses different variable pairs for each facet.</p>

<p>The usage of <code class="language-plaintext highlighter-rouge">PairGrid</code> is similar to <code class="language-plaintext highlighter-rouge">FacetGrid</code>. We start by calling the <code class="language-plaintext highlighter-rouge">PairGrid</code> constructor in order to initialize the facet grid and then call the plotting functions.  In the following example we are going to use the iris dataset. To demonstrate the flexibility of <code class="language-plaintext highlighter-rouge">PairGrid</code>, I will use different different kind of plots with extra many arguments. The <code class="language-plaintext highlighter-rouge">PairGrid</code> object provides three plotting methods for different axes groups: <code class="language-plaintext highlighter-rouge">map_diag()</code>, <code class="language-plaintext highlighter-rouge">map_upper()</code> and <code class="language-plaintext highlighter-rouge">map_lower()</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load the iris dataset
</span><span class="n">iris</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">load_dataset</span><span class="p">(</span><span class="sh">'</span><span class="s">iris</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Set the plotting style
</span><span class="n">plt</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="sh">'</span><span class="s">seaborn-paper</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Initiate the PairGrid instance
</span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">PairGrid</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">diag_sharey</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">"</span><span class="s">species</span><span class="sh">"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="sh">"</span><span class="s">Set2</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Scatter plots on the upper triangle
</span><span class="n">g</span><span class="p">.</span><span class="nf">map_upper</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">scatterplot</span><span class="p">)</span>

<span class="c1"># Histplot with kde on the diagonal
</span><span class="n">g</span><span class="p">.</span><span class="nf">map_diag</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">darksalmon</span><span class="sh">'</span><span class="p">,</span> 
           <span class="n">kde</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="p">.</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># Kde without hue parameter on the lower triangle 
</span><span class="n">g</span><span class="p">.</span><span class="nf">map_lower</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">kdeplot</span><span class="p">,</span>  <span class="n">shade</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
            <span class="n">shade_lowest</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">n_levels</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> 
            <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="p">.</span><span class="mi">7</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">mediumaquamarine</span><span class="sh">'</span><span class="p">)</span>

<span class="n">g</span><span class="p">.</span><span class="nf">add_legend</span><span class="p">();</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/pairGrid2.png" style="zoom:100%;" alt="Penguins Pairgrid using different plotting functions" />
<div class="thecap"> </div></div>

<p>It is important to understand the difference between a <code class="language-plaintext highlighter-rouge">FacetGrid</code> and a <code class="language-plaintext highlighter-rouge">PairGrid</code>:</p>

<blockquote>
  <p>In the former, each facet shows the same relationship conditioned on different levels of other variables. In the latter, each plot shows a different relationship (although the upper and lower triangles will have mirrored plots). Using PairGrid can give you a very quick, very high-level summary of interesting relationships in your dataset.</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">PairGrid</code> serves as the backbone to the high-level interface <code class="language-plaintext highlighter-rouge">pairplot()</code> and it is recommended to use it, unless you need more flexibility.</p>

<h3 id="jointgrid">JointGrid</h3>

<p><code class="language-plaintext highlighter-rouge">JointGrid</code> is another facet class from seaborn. It combines univariate plots such as histograms, rug plots, and KDE plots with bivariate plots such as scatter and regression.<br />
Let’s create a <code class="language-plaintext highlighter-rouge">JointGrid</code> instance without plots, to see how it looks like.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">JointGrid</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[])</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/jointGrid1.png" style="zoom:90%;" alt="JointGrid default layout" />
<div class="thecap"> </div></div>

<p>The middle, large axes, referred to as joint axes, is intended for bivariate plots such as scatter and regression. The other two axes, known as marginal axes, are meant for univariate plots.<br />
The simplest plot method, <code class="language-plaintext highlighter-rouge">plot()</code>, takes a pair of functions: one for the joint axes and one for the two marginal axes.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tips</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">load_dataset</span><span class="p">(</span><span class="sh">'</span><span class="s">tips</span><span class="sh">'</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">JointGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">"</span><span class="s">total_bill</span><span class="sh">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">"</span><span class="s">tip</span><span class="sh">"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">"</span><span class="s">time</span><span class="sh">"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="sh">"</span><span class="s">magma</span><span class="sh">"</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">scatterplot</span><span class="p">,</span> <span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/jointGrid2.png" style="zoom:100%;" alt="JointGrid with tips dataset and time as hue parameter" />
<div class="thecap"> </div></div>

<p>If you prefer to use different arguments for each function then you should use the following <code class="language-plaintext highlighter-rouge">JointGrid</code> class methods: <code class="language-plaintext highlighter-rouge">plot_joint()</code> and <code class="language-plaintext highlighter-rouge">plot_marginals()</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Let's use the penguins dataset again
</span><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nc">JointGrid</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">penguins</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="sh">"</span><span class="s">bill_length_mm</span><span class="sh">"</span><span class="p">,</span> 
                  <span class="n">y</span><span class="o">=</span><span class="sh">"</span><span class="s">bill_depth_mm</span><span class="sh">"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">"</span><span class="s">species</span><span class="sh">"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="sh">"</span><span class="s">Set1</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># Histplot with kde on both marginal axes
</span><span class="n">g</span><span class="p">.</span><span class="nf">plot_marginals</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">histplot</span><span class="p">,</span>  <span class="n">kde</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="sh">'</span><span class="s">step</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># kde and scatter plots on the joint axes
</span><span class="n">g</span><span class="p">.</span><span class="nf">plot_joint</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">kdeplot</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="nf">plot_joint</span><span class="p">(</span><span class="n">sns</span><span class="p">.</span><span class="n">scatterplot</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/jointGrid3.png" style="zoom:100%;" alt="JointGrid with penguins dataset and species as hue parameter using plot_marginal() and plot_joint()" />
<div class="thecap"> </div></div>

<p><code class="language-plaintext highlighter-rouge">JointGrid</code> serves also as a backbone for a figure-level function.</p>

<p>Now that we have some knowledge of axes-level plotting functions and understand how faceting in Seaborn works, we can finally move on to explore figure-level plotting functions.</p>

<h2 id="exploring-figure-level-plotting-functions">Exploring Figure-Level Plotting Functions</h2>

<p>The purpose of seaborn’s figure-level functions is to facilitate the plotting process. They provide high-level interfaces with matplotlib through one of the classes discussed above, usually a <code class="language-plaintext highlighter-rouge">FacetGrid</code>, which manages the figure.  They also provide a uniform interface to their underlying axes-level functions -Remember the following figure from the previous tutorial.</p>

<div class="imgcap">
<img src="/assets/3/function_overview2.png" style="zoom:80%;" alt="Figure-level functions and their corresponting axes-level functions" />
<div class="thecap"> </div></div>

<p>Hence, you don’t need to know the arguments and other details of the corresponding axes-level functions, nor do you need to know how to edit a matplotlib figure. It is perfectly fine to know only the arguments of the few figure-level functions provided by seaborn to generate very advanced figures, well unless you need more flexibility.</p>

<p>So in this section, we basically won’t cover anything that we haven’t already addressed in earlier sections. It is more a showcase of the power of seaborn than a how-to guide for using the figure-level functions.</p>
<h3 id="catplot">catplot</h3>

<p><code class="language-plaintext highlighter-rouge">seaborn.catplot()</code> is a figure-level interface for drawing categorical plots onto a <code class="language-plaintext highlighter-rouge">FacetGrid</code>. The <code class="language-plaintext highlighter-rouge">kind</code> parameter specifies the underlying axes-level plotting function to use.<br />
So let me show you how powerful and yet simple are these kind of high-level interfaces. For this purpose we will use the tips dataset.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">catplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">day</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">tip</span><span class="sh">'</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="sh">'</span><span class="s">sex</span><span class="sh">'</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="sh">'</span><span class="s">smoker</span><span class="sh">'</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="sh">'</span><span class="s">violin</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/catplot1.png" style="zoom:90%;" alt="catplot with violinplots in a facet grid" />
<div class="thecap"> </div></div>

<p>It’s really impressive how much information we can capture with just one line of code. No other visualization library can compete with this.  Well, at least not that I knew of.<br />
Let’s take a look at another figure-level function.</p>
<h3 id="lmplot">lmplot</h3>

<p>This figure-level function combine <code class="language-plaintext highlighter-rouge">regplot()</code> and <code class="language-plaintext highlighter-rouge">FacetGrid</code>.  It is designed to provide a convenient interface for fitting regression models across conditional subsets of a given dataset.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="nf">set_theme</span><span class="p">(</span><span class="n">color_codes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">"</span><span class="s">size</span><span class="sh">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">"</span><span class="s">total_bill</span><span class="sh">"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">"</span><span class="s">smoker</span><span class="sh">"</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="sh">"</span><span class="s">day</span><span class="sh">"</span><span class="p">,</span>
               <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span> <span class="n">x_jitter</span><span class="o">=</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/lmplot1.png" style="zoom:110%;" alt="lmplot" />
<div class="thecap"> </div></div>

<h3 id="pairplot">pairplot</h3>

<p><code class="language-plaintext highlighter-rouge">pairplot()</code> is a high-level interface for <code class="language-plaintext highlighter-rouge">PairGrid</code> class with the purpose to make it easy to plot a few common styles. However, if you need more flexibility, you should use <code class="language-plaintext highlighter-rouge">PairGrid</code> directly.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">pairplot</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">"</span><span class="s">species</span><span class="sh">"</span><span class="p">,</span> <span class="n">corner</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/pairplot1.png" style="zoom:110%;" alt="pairplot" />
<div class="thecap"> </div></div>

<h3 id="jointplot">jointplot</h3>

<p><code class="language-plaintext highlighter-rouge">jointplot()</code> is also meant to provide a convenient high-level interface to <code class="language-plaintext highlighter-rouge">JointGrid</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="p">.</span><span class="nf">jointplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">penguins</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="sh">"</span><span class="s">bill_length_mm</span><span class="sh">"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">"</span><span class="s">bill_depth_mm</span><span class="sh">"</span><span class="p">,</span> 
               <span class="n">kind</span><span class="o">=</span><span class="sh">"</span><span class="s">scatter</span><span class="sh">"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="sh">"</span><span class="s">BuPu</span><span class="sh">"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">'</span><span class="s">species</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<div class="imgcap">
<img src="/assets/4/jointplot1.png" style="zoom:100%;" alt="jointplot method on penguins dataset" />
<div class="thecap"> </div></div>

<h2 id="wrapping-up">Wrapping Up</h2>

<p>With this series of visualization tutorials we have covered the most important aspects of seaborn.<br />
In the first part, we introduced the matplotlib figure grammar and then discussed some common types of plots and their use cases, using only axes-level functions.<br />
In the second part of the tutorial, we looked at more advanced visualization techniques that use figure-level functions to analyze multivariate data, such as conditional small multiples and pairwise data relationships.</p>

<p>Both parts focused on the power and simplicity of seaborn. After all, no matter what plotting technique you use, there is no universally best way to represent your data. Different questions are better answered with different plotting techniques. Seaborn just makes it easy for you to switch between different visual representations by providing a consistent high-level API, while internally taking care of the layout design along with performing the necessary statistical computations. So that your only concern is to understand the various elements of your plots, rather than wasting time on the technicalities of generating them.</p>

<h2 id="references">References</h2>

<p>[1] Tufte, Edward (1990). Envisioning Information. Graphics Press. p. 67. ISBN 978-0961392116.<br />
[2] <a href="https://seaborn.pydata.org/index.html">seaborn official website</a></p>

  </article>

</div>

<center>
<b>tagged in</b>: [

  
  <a href="/tag/Visualization"><code class="highligher-rouge"><nobr>Visualization</nobr></code></a>

  
  <a href="/tag/Tutorial"><code class="highligher-rouge"><nobr>Tutorial</nobr></code></a>

  
  <a href="/tag/Seaborn"><code class="highligher-rouge"><nobr>Seaborn</nobr></code></a>

  
  <a href="/tag/Python"><code class="highligher-rouge"><nobr>Python</nobr></code></a>

]
</center>

<br><br>
<center>
<div class="share-page">
    <a href="https://twitter.com/intent/tweet?text=Plotting with Seaborn - Part 2&url=/ml/2021/09/07/Seaborn-Part2/&via=&related=" target="_blank" title="Share on Twitter"> <img alt="Tweet" src="/assets/images/flat_web_icon_set/color/Twitter.png" /></a>
    <a href="http://www.reddit.com/submit?url=/ml/2021/09/07/Seaborn-Part2/" target="_blank" title="Share on Reddit"><img alt="Reddit" src="/assets/images/flat_web_icon_set/color/Reddit.png" /></a>
    <a href="http://www.linkedin.com/shareArticle?mini=true&url=/ml/2021/09/07/Seaborn-Part2/&title=Plotting with Seaborn - Part 2&summary=&source=" target="_blank" title="Share on LinkedIn"><img alt="Share on LinkedIn" src="/assets/images/flat_web_icon_set/color/LinkedIn.png" /></a>
    <a href="https://plus.google.com/share?url=/ml/2021/09/07/Seaborn-Part2/" target="_blank" title="Share on Google+"><img alt="Share on Google+" src="/assets/images/flat_web_icon_set/color/Google+.png"></a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=/ml/2021/09/07/Seaborn-Part2/&quote=Plotting with Seaborn - Part 2" title="Share on Facebook" target="_blank"><img alt="Share on Facebook" src="/assets/images/flat_web_icon_set/color/Facebook.png" /></a>
</div>
</center>

<div>
  <br>
  <center>
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
    </a>
    <br>
    Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"> CC BY-NC-SA 4.0 International License</a>
  </center>
  <br>
</div>


  <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = '/ml/2021/09/07/Seaborn-Part2/'; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = /ml/2021/09/07/Seaborn-Part2/; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://skacem.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



      </div>
    </div>
    <footer class="site-footer">
  <div class="wrap">
    <div class="footer-top">
      <center>
      <ul>
        
          <li><a class="site-link" href="mailto:skanderkacem@gmail.com"><i class="fa fa-envelope-square fa-fw fa-2x"></i></a></li>
        

        

        
          <li><a class="site-link" href="https://github.com/skacem"><i class="fa fa-github-square fa-fw fa-2x"></i></a></li>
        

        

        

        <li><a class="site-link" href="/feed.xml"><i class="fa fa-rss-square fa-fw fa-2x"></i></a></li>
        <br>

      </center>
    </div>
    <div class="footer-bottom"></div>
  </div>
</footer>
    </body>
</html>